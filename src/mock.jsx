import * as R from "ramda";
import * as moment from "moment";

const dates = [
  "2019-11-07 15:51:50",
  "2019-11-11 03:28:17",
  "2019-11-08 17:02:56",
  "2019-11-05 11:41:19",
  "2019-11-02 08:15:32",
  "2019-11-17 18:08:08",
  "2019-11-20 03:20:56",
  "2019-11-10 11:05:48",
  "2019-11-14 18:11:57",
  "2019-11-06 11:30:20",
  "2019-11-03 06:58:41",
  "2019-11-12 15:25:00",
  "2019-11-12 05:01:07",
  "2019-11-19 09:00:33",
  "2019-11-23 20:10:59",
  "2019-11-23 15:25:13",
  "2019-11-05 12:55:41",
  "2019-11-14 14:59:42",
  "2019-11-06 04:44:58",
  "2019-11-04 13:11:36",
  "2019-11-18 17:25:50",
  "2019-11-13 12:03:12",
  "2019-11-19 17:01:34",
  "2019-11-17 07:04:46",
  "2019-11-07 05:01:00",
  "2019-11-15 07:42:06",
  "2019-11-18 10:33:26",
  "2019-11-04 18:43:53",
  "2019-11-13 02:57:09",
  "2019-11-14 22:13:19",
  "2019-11-06 19:10:48",
  "2019-11-10 05:14:08",
  "2019-11-07 07:37:33",
  "2019-11-19 03:34:34",
  "2019-11-03 09:55:49",
  "2019-11-16 17:08:07",
  "2019-11-12 04:25:11",
  "2019-11-03 19:17:26",
  "2019-11-08 18:48:41",
  "2019-11-16 11:05:34",
  "2019-11-10 01:44:22",
  "2019-11-14 01:04:42",
  "2019-11-21 03:05:06",
  "2019-11-10 06:56:04",
  "2019-11-22 14:29:13",
  "2019-11-07 02:51:56",
  "2019-11-03 22:51:23",
  "2019-11-18 18:07:20",
  "2019-11-12 03:40:23",
  "2019-11-17 13:59:54",
  "2019-11-14 02:56:12",
  "2019-11-09 20:39:56",
  "2019-11-19 02:30:36",
  "2019-11-05 03:48:50",
  "2019-11-19 20:36:00",
  "2019-11-19 17:04:24",
  "2019-11-21 14:02:53",
  "2019-11-19 11:26:30",
  "2019-11-19 05:18:14",
  "2019-11-07 23:12:20",
  "2019-11-09 01:05:57",
  "2019-11-09 18:16:39",
  "2019-11-05 06:29:20",
  "2019-11-05 16:25:43",
  "2019-11-09 12:23:25",
  "2019-11-19 04:11:28",
  "2019-11-07 16:13:40",
  "2019-11-22 06:23:40",
  "2019-11-11 00:53:20",
  "2019-11-11 10:49:30",
  "2019-11-11 10:11:00",
  "2019-11-14 13:49:23",
  "2019-11-14 10:08:21",
  "2019-11-21 23:46:18",
  "2019-11-15 04:36:26",
  "2019-11-16 01:15:09",
  "2019-11-16 20:19:54",
  "2019-11-16 04:06:48",
  "2019-11-08 07:12:03"
];
const types = ["weird", "move", "stop"];

const randomType = () => Math.round(Math.random() * 2);
const toMoment = d => moment(d, "YYYY-MM-DD hh:mm:ss");
const toDate = d => d.toDate();
const toSorted = (d1, d2) => {
  if (moment(d1).isAfter(d2)) {
    return -1;
  }
  if (moment(d1).isSame(d2)) {
    return 0;
  }
  return 1;
};
const reduceWIndex = R.addIndex(R.reduce);
const toTuples = (acc, cur, i, arr) =>
  i % 2
    ? [
        ...acc,
        { startTime: arr[i + 1], endTime: cur, type: types[randomType()] }
      ]
    : acc;

export const mockData = () =>
  R.pipe(
    R.map(toMoment),
    R.sort(toSorted),
    R.map(toDate),
    reduceWIndex(toTuples, [])
  )(dates);
